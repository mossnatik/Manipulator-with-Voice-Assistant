import numpy as np

def inverse_rotation_matrix(R):
    """
    Вычисляет обратную матрицу для матрицы поворота 3x3
    
    Параметры:
    R - матрица поворота 3x3
    
    Возвращает:
    R_inv - обратная матрица поворота (транспонированная матрица)
    """
    # Проверка ортогональности (должна быть примерно единичной)
    ortho_check = R @ R.T
    if not np.allclose(ortho_check, np.eye(3), atol=1e-6):
        print("Предупреждение: матрица не совсем ортогональна")
    
    # Для ортогональной матрицы обратная = транспонированная
    return R.T

# Пример использования
R = np.array([
    [0.04151 , -0.9585  ,  0.2822 ],
    [0.01221 , -0.2819 ,  -0.9594],
    [0.9991  ,  0.04327  , 0]
])

R_inv = inverse_rotation_matrix(R)
print("Обратная матрица поворота:")
print(R_inv)

# Проверка
print("\nПроверка R * R_inv:")
print(R @ R_inv)  # Должна получиться единичная матрица